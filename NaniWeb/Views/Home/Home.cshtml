@using NaniWeb.Data
@{
    var latestReleases = (Chapter[]) ViewData["LatestReleases"];
    ViewData["TitleSeparator"] = string.Empty;
    ViewData["AllowIndexing"] = true;
}

@section Header
{
    <partial name="_GoogleAnalytics"/>
}

<partial name="_HomeNav"/>

<div class="container mt-3">
    <div class="row">
        <div class="col-lg-8">
            <div class="card bg-primary border-secondary mb-3">
                <h5 class="card-header bg-primary">Latest Releases</h5>
                <div class="card-body py-0 px-3">
                    <div class="row">
                        @foreach (var release in latestReleases)
                        {
                            <div class="col-sm-6 border-bottom border-secondary p-2">
                                <div class="rounded float-left mr-2">
                                    <img class="rounded w-100" src="~/images/covers/@($"{release.Series.Id}_smaller.png")" alt="">
                                </div>
                                <div class="pt-0 pb-1 mb-1 border-bottom border-secondary d-flex align-items-center flex-nowrap">
                                    <a class="text-truncate" href="@Url.Action("Project", new {urlSlug = release.Series.UrlSlug})">
                                        <strong>@release.Series.Name</strong>
                                    </a>
                                </div>
                                <p class="py-0 mb-1 row no-gutters align-items-center flex-nowrap">
                                    <a class="text-truncate" href="@Url.Action("Project", new {urlSlug = release.Series.UrlSlug, chapterNumber = release.ChapterNumber})">@(release.Volume > 0 ? $"Vol. {release.Volume} " : string.Empty)Ch. @(release.ChapterNumber)@(string.IsNullOrEmpty(release.Name) ? string.Empty : $" - {release.Name}")</a>
                                </p>
                                <p class="text-truncate text-muted py-0 mb-1">
                                    @release.ReleaseDate.ToString("dd/MM/yyyy")
                                </p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <partial name="_SidePanel"/>
        </div>
    </div>
</div>

@section Body
{
    <script>
        $("#home").addClass("active");
    </script>
}